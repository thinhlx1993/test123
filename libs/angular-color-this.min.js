
/*! angular-color-this - v - 2015-11-25
 * http://eknowles.github.io/angular-color-this/
 * Copyright (c) 2015 ; Licensed  */

"use strict";
angular.module("ngColorThis", []).factory("Color", function () {
    function a(a, c) {
        var d = 0, e = d.r, f = d.g, g = d.b, h = d.rOffset, i = d.gOffset, j = d.bOffset, k = "", l = c ? parseInt(c) : -5;
        a = a.toString();
        for (var m = a.length - 1; m >= 0; m--)for (var n = a.charCodeAt(m).toString().split(""), o = n.length - 1; o >= 0; o--) {
            var p = n[o] - l;
            4 > p && (p = parseInt(p) + 4), k += Math.pow(p * Math.round(p / 2), 8)
        }
        return k.length % 3 === 0 && (k = k.split("").reverse().join("")), h = Math.floor(k.length / 3), i = 2 * h, j = k.length - 3, e = b(k[h], k[h + 1], k[h + 2]), f = b(k[i], k[i + 1], k[i + 2]), g = b(k[j], k[j + 1], k[j + 2]), {
            red: e,
            green: f,
            blue: g
        }
    }

    function b(a, b, c) {
        for (var d = parseInt(a + b + c); d > 255;)d = Math.round(d / 5);
        return d
    }

    function c(a, b, c) {
        return "rgb(" + a + ", " + b + ", " + c + ")"
    }

    return {convert: a, toVal: b, rgbToCSS: c}
}).directive("colorThis", ["Color", function (a) {
    return {
        restrict: "A", scope: {color: "=color", salt: "=colorSalt"}, link: function (b, c, d, e) {
            b.$watch("color", function (b, e) {
                b && !function () {
                    var e = a.convert(b), f = a.rgbToCSS(e.red, e.green, e.blue, 50);
                    d.colorThis.split(" ").forEach(function (a) {
                        c.css(a, f)
                    })
                }()
            }, !1)
        }
    }
}]);
